#----------------------------------------------------------------------------------------------------
#Script de desactivacion de antimalware de windows, mejor conocido como windows defender.
#es sencillo, permite su desactivacion y activacion rapidamente, sencillo y util para mas velocidad.
#----------------------------------------------------------------------------------------------------
#*3/12/22* 
#By jeff mcwill

function activar(){
    write-host "-----------------------------------------------------------"
    write-host "activando monitoreo en tiempo real del windows defender..."
    write-host "-----------------------------------------------------------"
    sleep 1
    Set-MpPreference -DisableRealtimeMonitoring $false
    write-host "-----------------------------------------------------------"      
    write-host "activado..."
    write-host "-----------------------------------------------------------"    
    break
}

function desactivar(){
    write-host "-----------------------------------------------------------"
    write-host "desactivando monitoreo en tiempo real del windows defender..."
    write-host "-----------------------------------------------------------"
    sleep 1
    Set-MpPreference -DisableRealtimeMonitoring $true
    write-host "-----------------------------------------------------------"
    write-host "desactivado..."
    write-host "-----------------------------------------------------------"
    break
}

#---- main -----#

function main(){
try{
    do{
        write-host "--------------------------------------------
*EJECUTAR COMO ADMINISTRADOR Powershel_ISE
--------------------------------------------
-   Desactivar Automaticamente Antivirus   -
--------------------------------------------
[1].Desactivar...
[2].Activar...
--------------------------------------------
[3].Salir
--------------------------------------------"
        $user = read-host ">>> "
        switch($user)
        {
            {$_ -eq 1} {
                write-host "Desactivando antivirus."
                desactivar
                break
            }
            {$_ -eq 2}{
                write-host "Activando antivirus nuevamente."
                activar
                break
            }
            {$_ -eq 3}{
                write-host "saliendo del script."
                write-host "adios ;)"
                break
            }
        }
}until($user -eq 3 -or $user -eq 2 -or $user -eq 1){
}
}catch{
    write-warning "Caracteres no validos, agrega otros."
}
}

#--------------------------------------------------------------------
main